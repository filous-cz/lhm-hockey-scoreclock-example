(this.webpackJsonplexogrine_hud=this.webpackJsonplexogrine_hud||[]).push([[0],{49:function(e,t,a){},50:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(41),c=a.n(r),i=(a(49),a.p,a.p,a(7)),s=a(8),u=a(16),l=a(15),m=(a(50),a(1)),d=a.n(m),h=a(9),f=a(42),_=a.n(f).a.parseUrl(window.location.href).query,p=_&&Number(_.port)||1349,v=!_.isProd,y={apiAddress:v?"http://localhost:".concat(p,"/"):"/"}.apiAddress;function w(e){return g.apply(this,arguments)}function g(){return(g=Object(h.a)(d.a.mark((function e(t){var a,n,o,r,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"GET",n=c.length>2?c[2]:void 0,o={method:a,headers:{Accept:"application/json","Content-Type":"application/json"}},n&&(o.body=JSON.stringify(n)),r=null,e.abrupt("return",fetch("".concat(y,"api/").concat(t),o).then((function(e){return r=e,e.json().catch((function(e){return r&&r.status<300}))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("match"));case 1:case"end":return e.stop()}}),e)})))})(),function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("match/current"));case 1:case"end":return e.stop()}}),e)})))}(),function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("teams/".concat(t)));case 1:case"end":return e.stop()}}),e)})))}(),function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w(t?"players?steamids=".concat(t.join(";")):"players"));case 1:case"end":return e.stop()}}),e)})))}(),function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("players/avatar/steamid/".concat(t)));case 1:case"end":return e.stop()}}),e)})))}();var b=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={home_goals:0,away_goals:0,time:1200,period:1,clock_on:!1,clock_visibility:!0,home_team_id:"",away_team_id:"",home_team_name:"HOM",away_team_name:"AWA",home_team_color:"#808080",away_team_color:"#808080"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.onChange((function(t){if(t){var a=t.teams_settings;a.team_away&&e.setState({away_team_name:a.team_away.team.shortName,away_team_id:a.team_away.id,away_team_color:a.team_away.team.extra.color}),a.team_home&&e.setState({home_team_name:a.team_home.team.shortName,home_team_id:a.team_home.id,home_team_color:a.team_home.team.extra.color})}})),N.on("clockState",(function(t){e.setState({clock_on:"start"===t})})),N.on("clockVisibility",(function(t){e.setState({clock_visibility:"show"===t})})),N.on("homeScore",(function(t){if("add"===t){var a=e.state.home_goals+1;e.setState({home_goals:a})}if("subtract"===t&&e.state.home_goals>0){a=e.state.home_goals-1;e.setState({home_goals:a})}})),N.on("period",(function(t){if("add"===t){var a=e.state.period+1;e.setState({period:a})}if("subtract"===t&&e.state.period>1){a=e.state.period-1;e.setState({period:a})}})),N.on("awayScore",(function(t){if("add"===t){var a=e.state.away_goals+1;e.setState({away_goals:a})}if("subtract"===t&&e.state.away_goals>0){a=e.state.away_goals-1;e.setState({away_goals:a})}})),setInterval(this.countdown.bind(this),1e3)}},{key:"countdown",value:function(){if(this.state.clock_on){var e=this.state.time-1;this.setState({time:e})}if(-1==this.state.time){var t=this.state.period+1;this.setState({time:1200,period:t,clock_on:!1})}}},{key:"display_time",value:function(e){var t=Math.floor(e/60),a=e-60*t;return a<10?o.a.createElement("span",null,t,":0",a):o.a.createElement("span",null,t,":",a)}},{key:"get_period_label",value:function(e){return 1===e?"1st":2===e?"2nd":3===e?"3rd":4===e?"OT":"OT"+(e-3).toString()}},{key:"render",value:function(){var e=this.state,t=e.time,a=e.period,n=e.home_team_name,r=e.away_team_name,c=e.home_goals,i=e.away_goals,s=e.away_team_id,u=e.home_team_id,l=e.home_team_color,m=e.away_team_color,d=e.clock_visibility;return o.a.createElement("div",{className:"layout"},o.a.createElement("div",{className:"scoreclock ".concat(d?"show":"hide")},o.a.createElement("div",{className:"logo"},"IIHF"),o.a.createElement("div",{className:"team_container away",style:{backgroundColor:"".concat(m)}},o.a.createElement("div",{className:"team_logo"},""===s?"":o.a.createElement("img",{src:"".concat(y,"api/teams/logo/").concat(s)})),o.a.createElement("div",{className:"name"},r),o.a.createElement("div",{className:"goals"},i)),o.a.createElement("div",{className:"team_container home",style:{backgroundColor:"".concat(l)}},o.a.createElement("div",{className:"team_logo"},""===u?"":o.a.createElement("img",{src:"".concat(y,"api/teams/logo/").concat(u)})),o.a.createElement("div",{className:"name"},n),o.a.createElement("div",{className:"goals"},c)),o.a.createElement("div",{className:"period"},this.get_period_label(a)),o.a.createElement("div",{className:"timer"},this.display_time(t))))}}]),a}(o.a.Component),k=function(){function e(){Object(i.a)(this,e),this.listeners=void 0,this.listeners=new Map}return Object(s.a)(e,[{key:"execute",value:function(e,t){var a=this.listeners.get(e);return!!a&&(a.forEach((function(e){t?e(t):e()})),!0)}},{key:"on",value:function(e,t){var a=this.listeners.get(e)||[];return a.push(t),this.listeners.set(e,a),!0}}]),e}(),O=function(){function e(){Object(i.a)(this,e),this.listeners=void 0,this.data=void 0,this.listeners=[],this.data={}}return Object(s.a)(e,[{key:"save",value:function(e){this.data=e,this.execute()}},{key:"execute",value:function(){var e=this,t=this.listeners;return!(!t||!t.length)&&(t.forEach((function(t){t(e.data)})),!0)}},{key:"onChange",value:function(e){var t=this.listeners||[];return t.push(e),this.listeners=t,!0}}]),e}(),j=a(44),E=Object(j.a)(v?"localhost:".concat(p):"/","update"),S=E.GSI,x=E.socket,N=new k,C=new O,I={name:"",isDev:!1},M=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={game:null,steamids:[],match:null,checked:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href;x.emit("started");var t=!1,a="";if(-1===e.indexOf("/huds/"))t=!0,a=(1e3*Math.random()+1).toString(36).replace(/[^a-z]+/g,"").substr(0,15),I.isDev=!0;else{var n=e.substr(e.indexOf("/huds/")+6);a=n.substr(0,n.lastIndexOf("/")),I.name=a}x.on("readyToRegister",(function(){x.emit("register",a,t)})),x.on("hud_config",(function(e){console.log(e),C.save(e)})),x.on("hud_action",(function(e){N.execute(e.action,e.data)})),x.on("keybindAction",(function(e){N.execute(e)})),x.on("refreshHUD",(function(){window.top.location.reload()})),x.on("update_mirv",(function(e){S.digestMIRV(e)}))}},{key:"render",value:function(){return o.a.createElement(b,null)}}]),a}(o.a.Component);c.a.render(o.a.createElement(M,null),document.getElementById("root"))}},[[89,1,2]]]);